---
title: "User Guide: Table of Contents"
output: 
  html_document:
    toc: true
    toc_float: true
    collapsed: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

This app fits species sensitivity distributions to concentration data. The user is able to select more than one distribution and plot the individual fits. The app is built from the R package [ssdtools](https://github.com/bcgov/ssdtools), and shares the same functionality.

Hint: Find and click the info icons throughout the app to find more information on a particular input.

### Step 1: Provide data 

* Data should be provided for **only one chemical** at a time. 
* Each species should not have more than one concentration value. 
* Data must have **at least one column** containing **at least 8 distinct, positive, non-missing concentration values**. 
* Optionally, you can include **species and group** columns, which are used to label and color plot output, respectively.  
* Any additional columns are accepted but are not used within the app.

```{r data-demo, echo=FALSE, message = FALSE}
library(knitr)
library(dplyr)
library(kableExtra)
df <- ssdtools::boron_data[1:8,] %>% dplyr::select(Concentration = Conc, Species, Group)
kable(df) %>% kable_styling("bordered", full_width = FALSE, font_size = 11)
```

There are three options to provide data to the app:  

1. **Use the demo Boron dataset**. 
    - This can be used to simply preview the app functionality on a dataset that 'works'. 
2. **Upload a csv file**. 
    - The app does not accept excel formats or text files. If you have an excel file, try exporting a worksheet to csv. 
3. **Fill out the interactive table**. 
    - Species and Group columns are optional. Click on a cell to begin. Right-click on the table to delete/insert rows or columns. Column names cannot be changed. 
    
Finally, you can preview the data you have provided in the table on the right hand side of the tab.
\

<center>

![Opps Gif missing](https://media.giphy.com/media/fjyG7Wbgp1RKV8sS9s/giphy.gif)

</center>

### Step 2: Fit distributions

1. Specify **which column contains concentration values**. The app reads the data you provided, extracts column names and attempts to guess which column contains concentration values. In some cases, you may have to change it.
2. **Select or deselect distributions to fit**. The outputs may take a moment to update. 
3. Once you are satisified with the outputs and have formatted the plot, you may **download the plot and goodness of fit table** as a png and csv file, respectively.
 
<!--  <center> -->

<!-- ![Opps Gif missing](https://media.giphy.com/media/yIjxGcFKt0zK2vj38j/giphy.gif) -->

<!-- </center> -->

Additional information about the **goodness of fit table**:  
The columns in the goodness of fit table are the distribution (dist), the Anderson-Darling statistic (ad), the Kolmogorov-Smirnov statistic (ks), the Cramer-von Mises statistic (cvm), Akaike’s Information Criterion (aic), Akaike’s Information Criterion corrected for sample size (aicc), Bayesian Information Criterion (bic), the AICc difference (delta) and the AICc based Akaike weight (weight). The prediction is the model averaged (using aicc) estimate of the fit. The percent hazard concentration is the concentration of the chemical which is predicted to affect that percent of the species tested.

### Step 3: Predict 

<!--  <center> -->

<!-- ![Opps Gif missing](https://media.giphy.com/media/yIjxGcFKt0zK2vj38j/giphy.gif) -->

<!-- </center> -->


### Step 4: Get R code 

<!--  <center> -->

<!-- ![Opps Gif missing](https://media.giphy.com/media/yIjxGcFKt0zK2vj38j/giphy.gif) -->

<!-- </center> -->



  

```{r data-plot, echo=FALSE, results="asis"}

```



